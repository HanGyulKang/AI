# Audio File Text Converter v3.1

음성 파일을 텍스트로 변환하는 Windows 배치 스크립트입니다. OpenAI Whisper 모델을 사용하여 한국어 음성을 텍스트로 변환합니다.

## 필수 파일

이 프로그램을 실행하기 위해서는 다음 파일들이 필요합니다:

### 1. Whisper 모델 파일
- **파일명**: `ggml-large-v2-q8_0.bin` (권장)
- **설명**: whisper.cpp로 변환된 한국어 인식 모델
- **대안 모델**: `ggml-base.bin`, `ggml-small.bin` 등

### 2. Whisper CLI 실행 파일
- **파일명**: `whisper-cli.exe` (Windows)
- **설명**: whisper.cpp로 빌드된 정적 실행 파일

### 3. 파일 배치
```
프로젝트 루트/
├── whisper-cli.exe
├── ggml-large-v2-q8_0.bin
└── convert_audio_v2.bat
```

### 4. 설명서
- [위키: whisper.cpp](../whisper.cpp_local/README.md)

## 주요 기능

- ✅ **Windows 10/11 완전 호환**
- ✅ **반복 실행 기능** - 여러 디렉토리 연속 처리
- ✅ **자동 파일 타입 설정** - 기본값 txt, vtt 지원
- ✅ **진행 상황 표시** - 실시간 처리 상태 확인
- ✅ **에러 처리 강화** - 안정적인 변환 프로세스
- ✅ **소요 시간 계산** - 정확한 처리 시간 표시

## 파일 구조

```
프로젝트/
├── audio/
│   ├── 202501/
│   │   ├── 01/
│   │   │   ├── 20250707153757-54.wav
│   │   │   └── ...
│   │   └── 05/
│   │       ├── 20250707153757-52.wav
│   │       └── ...
│   └── 202502/
│       └── ...
├── text/          (변환된 텍스트 파일들이 저장됨)
├── whisper-cli.exe
├── ggml-large-v2-q8_0.bin
└── convert_audio_v2.bat
```

## 사용법

### 1. 기본 실행
1. `convert_audio_v2.bat` 파일을 더블클릭하여 실행
2. 년월 입력 (예: 202501)
3. 일자 입력 (예: 05)
4. 파일 타입 입력 (txt/vtt) - 엔터만 누르면 기본값 txt
5. 자동으로 처리 진행

### 2. 반복 실행
- 한 번의 변환이 완료된 후 "Process another directory? (y/n):" 메시지가 나타남
- 'y' 또는 'yes'를 입력하면 새로운 디렉토리 처리 가능
- 'n'을 입력하면 프로그램 종료

## 예시

### 입력 예시
```
Year/Month (e.g., 202501): 202501
Day (e.g., 05): 05
File type (txt/vtt) [default: txt]: [엔터]
```

### 처리 과정
1. `audio/202501/05/` 폴더의 모든 음성 파일을 찾음
2. `text/202501/05/` 폴더를 자동 생성
3. 각 음성 파일을 whisper-cli.exe로 텍스트 변환
4. 원본 파일명.txt 형태로 저장

### 결과
```
text/
└── 202501/
    └── 05/
        ├── 20250707153757-52.txt
        ├── 20250707153757-53.txt
        └── ...
```

## 지원 파일 형식

### 입력 파일 형식
- .wav, .mp3, .webm, .m4a, .flac, .ogg, .aac, .wma

### 출력 파일 형식
- **txt**: 일반 텍스트 파일
- **vtt**: WebVTT 형식 (타임라인 포함)

## 주의사항

### 필수 파일
- `whisper-cli.exe` - Whisper CLI 실행 파일
- `ggml-large-v2-q8_0.bin` - 한국어 인식 모델 파일

### 폴더 구조
- audio 폴더에 `{yyyyMM}/{dd}` 형태의 폴더 구조가 있어야 함
- 예: `audio/202501/05/`

### 시스템 요구사항
- Windows 10/11
- 충분한 디스크 공간 (음성 파일 크기의 약 10배)
- 메모리: 최소 4GB RAM 권장

## 오류 해결

### "Cannot find folder" 오류
- 년월과 일자를 정확히 입력했는지 확인
- audio 폴더에 해당 날짜의 폴더가 존재하는지 확인

### "No audio files found" 오류
- 지원되는 음성 파일 형식인지 확인
- 폴더에 음성 파일이 실제로 있는지 확인

### 변환 실패
- whisper-cli.exe와 모델 파일이 있는지 확인
- 음성 파일이 손상되지 않았는지 확인
- 충분한 디스크 공간이 있는지 확인

## 성능 정보

- **처리 속도**: 파일 크기와 길이에 따라 다름
- **메모리 사용량**: 약 2-4GB RAM 사용
- **출력 품질**: 한국어 인식 정확도 높음

## 업데이트 내역

### v3.1 (현재 버전)
- Windows 10/11 완전 호환
- 반복 실행 기능 추가
- 파일 타입 기본값 설정
- 확장자 중복 문제 해결
- 에러 처리 강화

### v2.0
- 기본 변환 기능
- 진행 상황 표시
- 시간 계산 기능

## [라이선스](../LICENSE)

이 프로젝트는 MIT 라이선스 하에 배포됩니다. 